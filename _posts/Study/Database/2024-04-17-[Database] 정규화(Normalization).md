---
title: "[Database] 정규화(Normalization)"
author: baduk
date: 2024-04-17 13:51:00 +0900
categories: [Study, Database]
tags: [Database]
---
## DB 용어
### 후보키(Candidate key)
후보키는 튜플을 유일하게 식별하기위해 사용하는 속성들의 부분집합을 뜻한다. 쉽게 말하자면 기본키로 사용할 수 있는 속성들을 말한다.

### 기본키(Primary key)
쉽게말해 중복되지 않은 키를 뜻한다.

### Composite primary key
Primary key가 없는 테이블에서 attribute를 붙여서 만든 Primary key 대체용 Key.

### 함수적 종속
함수적 종속은 데이터들이 어떠한 기준 값에 의해 종속되는 것을 의미한다. 예를들어 회원 이름은 회원 번호에 종속적이라고 할 수 있다.


### 완전 함수 종속
어떤 특정한 번호를 가지고 특정할 수 있는 것. 

- 예시1. 주민번호로 사람의 이름을 특정할 수 있는데, 이때 사람의 이름은 주민번호의 완전함수종속이라고 할 수 있다.
- 예시2. 학번,과목 두 개를 가지고 점수를 알 수 있는데, 이때 점수는 학번 과목에 대해서 완전함수 종속이다.

### 부분 함수 종속(Partial Dependency)
composite primary key에 종속된 것을 부분 함수 종속이라고 한다.

- 예시1. 위에서 점수는 학번, 과목에 대해서 완전 함수 종속되어있다고 했는데, 이때 사람의 이름은 학번에 대해서 부분 함수 종속이다. 그 이유는 과목과 상관없이 학번에 따라 이름이 특정될 수 있기 때문이다.

### 이행 함수 종속(Transitive Dependency)
X -> Y -> Z 일 때, X -> Z가 성립하면 Z는 X에 대해서 이행 함수 종속되어있다고 할 수 있다.(X->Z 관계에서 Z를 종속자 X를 결정자라고 한다.)

## 정규화
정규화는 DB설계에서 중복을 줄이고, 일관성과 무결성을 유지하기 위해 데이터를 구조화하는 과정이다. 그 목적은 DB성능 향상과 데이터 조작시 발생할 수 있는 이상 현상(삽입이상, 삭제이상, 갱신이상)을 방지하는데 있다.

### 1NF(제1정규형)
원자값이 아닌 `도메인`을 분해한 테이블이다. 즉,  중복된 속성을 제거한 테이블을 뜻한다. 더 간단하게 말하자면, 도메인이 원자값인 테이블이다.

예를들어 데이터 한 행에서 과일이라는 속성에 값에 사과, 바나나 이렇게 두개가 들어가 있으면, 그것을 사과, 바나나를 각각 쪼개어 두행으로 만든다.

### 2NF(제2정규형)
Partial Dependency(`부분함수` 종속성)를 제거하여 다른 테이블로 옮기는 과정을거쳐 만들어진 테이블. 즉, 현재 테이블의 주제와 관련없는 컬럼을 제거하고 다른 테이블로 옮기는 과정을 거친 테이블을 제2정규형이라고 한다. 또한 완전 함수적 종속을 만족하는 정규형이다.

예를들어 {A,B}가 기본키라할 때, 이 {A,B}에 종속되는 C칼럼이 있으면 이것을 제거 및 분리하는 것을 제2정규화라고 한다.

### 3NF(제3정규형)
제3정규형은 제2정규형에서 `이행적` 함수 종속을 제거한 테이블이다. 즉, 일반 컬럼에만 종속된 컬럼을 제거하여 다른 테이블로 옮기는 과정을 거친 테이블이다.

### BCNF(Boyce-Codd 정규형)
모든 결정자가 모두 후보키에 속해야 BCNF를 만족한다.  이 과정에서는 결정자이면서 후보키가 아닌것을 제거한다.

### 4NF(제4정규형)
다치 종속을 제거한 테이블

### 5NF(제5정규형)
조인 종속을 제거 또는 이용한다.


## DB 성능 높이기
파티션(물리적 독립공간에서 나누기), 샤딩(분산처리) -> 나누는 것

클러스터 -> 비슷한 공간에 모아두는 것

인덱스 -> 목차를 만드는것

뷰 -> 가상의 테이블

반정규화 - 성능을 높이기위해 정규화를 좀 위반하는 행위