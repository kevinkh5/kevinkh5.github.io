---
title: '[Web] 개인키와 공개키, SSL, HTTP와 HTTPS'
author: baduk
date: 2024-07-21 08:30:00 +0900
categories: [Study, Web]
tags: [Web]
---

## 개인키와 공개키

개인키(Private Key) 암호화는 동일한 키로 암호화하고 동시에 복호화가 가능하다. 따라서 개인키는 암호화와 복호화 모두 동일한 키를 사용하여 대칭키라고 한다. 하지만 암호화와 복호화 모두 동일한 키를 사용한다면 보안상 위험할 수 있다. 그 이유는 개인키를 전달하는 과정에서 노출이 되면 암호화된 데이터를 복호화당할 수 있기 때문이다.

따라서 이러한 개인키의 단점을 보완히기 위해 공개키(Public Key)암호화가 등장하였는데,  공개키 암호화는 각자 공개된 키와 개인키를 각각 가지고 암호화와 복호화를 한다. 공개키 암호화의 핵심원리는 공개키로 암호화한것은 해당 공개키를 가진 사람의 개인키로 복호화할 수 있고, 개인키로 암호화한 것은 해당 개인키를 가진 사람의 공개키로 복호화할 수 있다. 암호화할 때와 복호화할 때 사용되는 키가 다른 공개키(Public Key)암호화는 비대칭키라고도 한다.

하지만 공개키 암호화는 암호화 및 복호화 속도가 개인키 암호화에 비해서 느리다는 단점이 있다. 하지만 관리해야할 키 수가 개인키 암호화에 비해서 적다는 장점이 있다. 개인키 암호화의 경우 각자가 서로 공유해야 하는 키를 하나씩 가져야 하므로 (n(n+1))/2 개 만큼의 키가 필요하지만 공개키 암호화의 경우 각자 개인키 1개 공개키 1개를 가지고 있으면 되므로 2n 개 만큼의 키만 있으면 된다.

## SSL(Secure Socket Layer)

- 용어가 TLS로 대체되었지만, SSL이라는 용어를 더 많이 쓴다.
- SSL은 데이터를 안전하게 전송하기 위한 암호화 프로토콜이다.


## HTTP vs HTTPS
- HTTPS는 HTTP 프로토콜로 송수신하는 일반 텍스트를 제 3자에게 노출되지 않도록 하기위해 SSL 또는 TLS 프로토콜을 통해 암호화하여 송수신한다.
- HTTPS는 오늘날 대부분의 웹사이트가 보안을 강화하기 위해 사용한다.


## HTTPS 통신 과정

먼저 클라이언트는 서버를 신뢰하기 위해 handshake 과정을 거쳐야 한다. 따라서 서버는 클라이언트가 신뢰할 수 있도록 handshake과정 중 클라이언트에게 인증서를 담아서 전달한다. 그리고 클라이언트 측에서는 이 인증서가 Certificate Authority(CA, 인증기관)에 의해 검증된 것인지 브라우저를 통해 확인한다. 브라우저는 인증서를 확인할 때 비대칭키 방식으로 복호화를 진행하는데, 인증서는 CA의 개인키로 암호화 되어 있기 때문에 CA의 공개키를 통해 복호화한다.

만약 복호화에 성공했다면, 검증된 인증서라는 것을 확인할 수 있다. 그리고 그 인증서 안에는 서버측의 공개키가 포함되어있는데, 해당 공개 키는 서버측에 데이터를 송신하는 과정에서 암호화하는데 사용된다. 단, 비대칭 키 방식은 개인 키 방식에 비해 암호화 및 복호화 속도도 느리고  연산비용이커서, 비대칭 키 방식만으로 전달하는 모든 데이터를 암호화해서 보내지는 않고 어떤 임시 키를 암호화해서 서버에 보낸다.

결론적으로 HTTPS 통신 과정에서 대칭 키와 비대칭 키가 혼합돼서 사용 되고, 간단하게 말하자면 HTTPS 통신 과정은 서버 - 클라이언간의 초기 handshake 과정에서 비대칭키 암호화 방식으로 안전하게 서로간의 대칭 키(세션 키)를 교환하는 원리다.

이 과정을 구체적으로 설명하자면, 초기 handshake과정에서 클라이언트가 서버로 받은 데이터를 이용해서 임시 키를 만들면 클라이언트는 해당 임시 키를 서버의 공개키로 암호화해서 서버에 보낸다. 서버는 해당 임시 키를 자신의 개인키로 복호화하고, 클라이언트와 서버는 일련의 과정을 거쳐서 서로 동일한 대칭키를 생성한다.

이제 이 대칭 키는 서버와 클라이언트 둘만 갖고 있으므로 데이터를 주고받을 때 암호화 및 복호화하는데 안전하게 사용된다.


